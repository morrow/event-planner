{"version":3,"sources":["EventPlanner.js"],"names":["EventPlanner","output","load_saved_data","this","undefined","users","events","initialize","prototype","attachEventListeners","loadSavedData","renderEvents","initialized","self","forEach","call","document","querySelectorAll","form","addEventListener","e","validateForm","submitForm","showErrorDialog","preventDefault","element","validateElement","listener","querySelector","showDialog","setCurrentUser","button","current_user","length","name","editEvent","createEvent","id","value","splice","parseInt","slice","_event","saveData","closeDialog","target","initializeAutocomplete","autocomplete","google","maps","places","Autocomplete","item","window","localStorage","toUpperCase","JSON","stringify","category","parse","console","log","createUsers","user","createUser","EventPlannerEvent","push","createEvents","User","getUser","index","getEvent","innerHTML","render","user_obj","attribute","password","encryptPassword","setTimeout","email","elements","attributes","style","display","match","type","validatePasswords","parentNode","validateEmail","validateName","password_a_element","password_b_element","password_a","password_b","messages","tests","a","evaluateRequirements","validateLogin","email_element","password_element","passing","login","validated","input","getAttribute","border","onkeydown","setAttribute","requirements","createElement","className","shift","i","requirement","textContent","appendChild","_requirements","insertBefore","nextSibling","show_dialog","showEditDialog","replace","action","selectors","join","error"],"mappings":"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","file":"EventPlanner.js","sourcesContent":["function EventPlanner(output, load_saved_data){\n  this.load_saved_data = load_saved_data === undefined || load_saved_data === true;\n  this.users = [];\n  this.events = [];\n  this.output = output;\n  this.initialize();\n}\n\nEventPlanner.prototype.initialize = function(){\n  this.attachEventListeners();\n  if(this.load_saved_data){\n    this.loadSavedData();\n  }\n  this.renderEvents();\n  this.initialized = true;\n};\n\nEventPlanner.prototype.attachEventListeners = function(){\n  var self = this;\n  // handle form form submit event\n  [].forEach.call(document.querySelectorAll('form'), function(form){\n    form.addEventListener('submit', function(e){\n      try {\n        // submit form if validated\n        if(self.validateForm(this)){\n          self.submitForm(this);\n        }\n      } catch(e){\n        // show error dialog if necessary\n        self.showErrorDialog(e);\n      }\n      // prevent form from natively submitting\n      e.preventDefault();\n      return false;\n    });\n  });\n  // validate form elements on input\n  [].forEach.call(document.querySelectorAll('form input, form textarea'), function(element){\n    element.addEventListener('input', function(){\n      self.validateElement(element);\n    });\n  });\n  // click/touch events\n  ['onclick', 'touchstart'].forEach(function(listener){\n    // login\n    document.querySelector('#login')[listener] = function(){\n      self.showDialog('login');\n    };\n    // logout\n    document.querySelector('#logout')[listener] = function(){\n      self.setCurrentUser(undefined);\n    };\n    // register\n    document.querySelector('#register')[listener] = function(){\n      self.showDialog('register');\n    };\n    // create event\n    [].forEach.call(document.querySelectorAll('.new-event'), function(button){\n      button[listener] = function(){\n        if(self.current_user){\n          if(self.events[self.events.length - 1].name === undefined){\n            self.editEvent(self.events[self.events.length - 1]);\n          } else {\n            self.createEvent({});\n          }\n          self.showDialog(['create-edit-event', 'create-event']);\n        }\n        else {\n          self.showDialog(['login', 'unauthorized']);\n        }\n      };\n    });\n    // delete event\n    document.querySelector('#create-edit-event-delete')[listener] = function(e){\n      var id = document.querySelector('#create-edit-event-id').value;\n      self.events.splice(parseInt(id), 1);\n      self.events.slice(id).forEach(function(_event){\n        _event.id -=1;\n      });\n      self.renderEvents();\n      self.saveData();\n      self.closeDialog();\n      e.preventDefault();\n      return false;\n    };\n    // show registration\n    document.querySelector('#show-registration-dialog')[listener] = function(){\n      self.showDialog('register');\n    };\n    // show registration\n    document.querySelector('#show-login-dialog')[listener] = function(){\n      self.showDialog('login');\n    };\n    // close overlay\n    document.querySelector('#overlay')[listener] = function(e){\n      if(e.target.id == 'overlay'){\n        self.closeDialog();\n      }\n    };\n  });\n};\n\nEventPlanner.prototype.initializeAutocomplete = function(){\n  this.autocomplete = new google.maps.places.Autocomplete((document.querySelector('#create-edit-event-location')));\n};\n\nEventPlanner.prototype.saveData = function(){\n  var self = this;\n  if(this.initialized){\n    ['users', 'events'].forEach(function(item){\n      if(self[item] !== undefined){\n        window.localStorage['eventPlanner/' + item[0].toUpperCase() + item.slice(1, item.length - 1)] = JSON.stringify(self[item]);\n      }\n    });\n  }\n};\n\nEventPlanner.prototype.loadSavedData = function(){\n  var self = this;\n  ['User', 'Event'].forEach(function(category){\n    if(window.localStorage['eventPlanner/' + category] !== undefined){\n      try {\n        self['create' + category + 's'](JSON.parse(window.localStorage['eventPlanner/' + category]));\n      } catch(e){\n        window.console.log(e);\n      }\n    }\n  });\n  // if current user is not loaded, set to first user\n  if(this.current_user === undefined){\n    this.setCurrentUser(this.users[0]);\n  }\n};\n\nEventPlanner.prototype.createUsers = function(users){\n  var self = this;\n  users.forEach(function(user){\n    self.createUser(user);\n  });\n};\n\nEventPlanner.prototype.createEvent = function(_event){\n  _event.id = this.events.length;\n  if(!(_event instanceof EventPlannerEvent) && typeof(_event) === 'object'){\n    _event = new EventPlannerEvent(this, _event);\n  }\n  this.events.push(_event);\n  this.editEvent(_event);\n  this.saveData();\n};\n\nEventPlanner.prototype.createEvents = function(events){\n  var self = this;\n  events.forEach(function(_event){\n    self.createEvent(_event);\n  });\n};\n\nEventPlanner.prototype.createUser = function(user){\n  if(!(user instanceof User) && typeof(user) === 'object'){\n    user = new User(user);\n  }\n  this.users.push(user);\n  if(user.current_user){\n    this.setCurrentUser(user);\n  }\n  this.saveData();\n};\n\nEventPlanner.prototype.getUser = function(index){\n  return this.users[index];\n};\n\nEventPlanner.prototype.getEvent = function(index){\n  return this.events[index];\n};\n\nEventPlanner.prototype.renderEvents = function(){\n  var self = this;\n  this.output.innerHTML = '';\n  this.events.forEach(function(_event){\n    _event.render(self.output);\n  });\n};\n\nEventPlanner.prototype.submitForm = function (form){\n  var self = this;\n  if(form.id === 'register-form'){\n    var user_obj = {};\n    ['name', 'email', 'password'].forEach(function(attribute){\n      user_obj[attribute] = form.querySelector('#register-' + attribute).value;\n    });\n    var user = new User(user_obj);\n    user.password = user.encryptPassword(user.password);\n    this.users.push(user);\n    this.saveData();\n    this.setCurrentUser(user);\n    this.showDialog('session-start');\n    window.setTimeout(function(){ self.closeDialog(); }, 750);\n  }\n  else if(form.id === 'login-form'){\n    this.users.forEach(function(user){\n      if(user.email == form.elements['login-email'].value){\n        self.saveData();\n        self.setCurrentUser(user);\n        self.showDialog('session-start');\n        window.setTimeout(function(){ self.closeDialog(); }, 750);\n      }\n    });\n  }\n  else if(form.id === 'create-edit-event-form'){\n    var index = parseInt(form.elements['create-edit-event-id'].value);\n    var _event = this.events[index];\n    _event.attributes.forEach(function(attribute){\n      _event[attribute] = form.elements['create-edit-event-' + attribute].value;\n    });\n    this.saveData();\n    this.closeDialog();\n    this.renderEvents();\n  }\n};\n\nEventPlanner.prototype.setCurrentUser = function(user){\n  this.current_user = user;\n  [].forEach.call(document.querySelectorAll('#user button'), function(button){\n    button.style.display = 'none';\n    if(user !== undefined){\n      if(button.id.match(/user|logout/)){\n        if(button.id == 'current_user'){\n          button.innerHTML = user.email;\n        }\n        button.style.display = '';\n      }\n    } else {\n      if(button.id.match(/register|login/)){\n        button.style.display = '';\n      }\n    }\n  });\n};\n\nEventPlanner.prototype.validateElement = function(element){\n  if(element.id.match(/register/)){\n    if(element.type == 'password'){\n      return this.validatePasswords(element.parentNode.parentNode);\n    }\n    if(element.type == 'email'){\n      return this.validateEmail(element);\n    }\n    if(element.type == 'text' && element.id.match(/name/)){\n      return this.validateName(element);\n    }\n  }\n};\n\nEventPlanner.prototype.validatePasswords = function (form) {\n  // get password elements\n  var password_a_element = form.querySelectorAll('[type=password]')[0];\n  var password_b_element = form.querySelectorAll('[type=password]')[1];\n  // get password values\n  var password_a = password_a_element.value;\n  var password_b = password_b_element.value;\n  // return true if blank passwords\n  if(password_a == password_b && password_a == ''){ return true; }\n  // messages\n  var messages = ['Passwords must', 'be longer than 6 characters', 'contain a symbol ($!&)', 'contain a number', 'contain a lowercase letter', 'contain an uppercase letter'];\n  // tests\n  var tests = [\n    function(a){ return a.length > 6; },\n    function(a){ return a.match(/[\\!\\@\\#\\$\\%\\^\\&\\*]/g); },\n    function(a){ return a.match(/[0-9]/g); },\n    function(a){ return a.match(/[a-z]/g); },\n    function(a){ return a.match(/[A-Z]/g); }\n  ];\n  this.evaluateRequirements(password_a_element, tests, messages);\n  this.evaluateRequirements(password_b_element, [function(){ return password_a == password_b; }], ['match']);\n};\n\nEventPlanner.prototype.validateLogin = function(form){\n  var self = this;\n  var email_element = form.elements['login-email'];\n  var password_element = form.elements['login-password'];\n  var passing = false;\n  [].forEach.call(self.users, function(user){\n    if(user.email === email_element.value && user.login(password_element.value)){\n      passing = true;\n    }\n  });\n  if(!passing){ this.evaluateRequirements(password_element, [function(){ return false; }], ['E-mail or Password incorrect']); }\n  return passing;\n};\n\nEventPlanner.prototype.validateEmail = function(element){\n  var messages = ['E-mail', 'Must be valid e-mail address', 'Must not be already registered'];\n  var tests = [\n    function(a){ return a.match(/^\\S+@\\S+$/); }\n  ];\n  this.evaluateRequirements(element, tests, messages);\n};\n\nEventPlanner.prototype.validateName = function(element){\n  var messages = ['Name', 'is required'];\n  var tests = [\n    function(a){ return a.match(/\\w*/); }\n  ];\n  this.evaluateRequirements(element, tests, messages);\n};\n\nEventPlanner.prototype.validateForm = function(form){\n  var validated = true;\n  if(form.id.match(/login/)){\n    return this.validateLogin(form);\n  }\n  [].forEach.call(form.querySelectorAll('input'), function(input){\n    if(input.getAttribute('data-validated') == 'false'){\n      input.style.border = '3px solid red';\n      input.onkeydown = function(){\n        this.style.border='';\n        this.onkeydown = function(){};\n      };\n      validated = false;\n    }\n  });\n  return validated;\n};\n\nEventPlanner.prototype.evaluateRequirements = function(element, tests, messages){\n  // reset failing status for element\n  element.setAttribute('data-validated', true);\n  // create requirements element\n  var requirements = document.createElement('div');\n  requirements.className = 'requirements';\n  if(messages.length > 1){\n    requirements.innerHTML = '<h4>' + messages.shift() + '<h4>';\n  }\n  requirements.setAttribute('id', element.id + '-requirements');\n  // run each test and add result to requirements element\n  for(var i = 0; i < tests.length; i++){\n    var requirement = document.createElement('div');\n    requirement.textContent = messages[i];\n    requirement.className = 'requirement';\n    requirement.setAttribute('data-validated', true);\n    if(!tests[i](element.value)){\n      requirement.setAttribute('data-validated', false);\n      element.setAttribute('data-validated', false);\n    }\n    requirements.appendChild(requirement);\n  }\n  var _requirements = document.querySelector('#' + element.id + '-requirements');\n  if(_requirements){\n    _requirements.innerHTML = requirements.innerHTML;\n  } else{\n    element.parentNode.insertBefore(requirements, this.nextSibling);\n  }\n};\n\nEventPlanner.prototype.editEvent = function(_event, show_dialog){\n  if(typeof(_event) == \"number\" || typeof(_event) == \"string\"){\n    if(typeof(_event) == \"string\"){\n      _event = parseInt(_event);\n    }\n    _event = this.events[_event];\n  }\n  _event.attributes.forEach(function(attribute){\n    if(_event[attribute] !== undefined){\n      document.querySelector('#create-edit-event-' + attribute).value = _event[attribute];\n    } else {\n      document.querySelector('#create-edit-event-' + attribute).value = '';\n    }\n  });\n  if(show_dialog){\n    this.showEditDialog();\n  }\n};\n\nEventPlanner.prototype.closeDialog = function(){\n  document.querySelector('body').className = document.querySelector('body').className.replace('overlay-active', '');\n};\n\nEventPlanner.prototype.showDialog = function(action){\n  // hide all dialog actions\n  var elements = document.querySelectorAll('#dialog [data-dialog-action]');\n  [].forEach.call(elements, function(element){\n    element.style.display = 'none';\n  });\n  // get list of elements\n  if(typeof(action) === 'object'){\n    // parse query selector if action is list of actions\n    var selectors = [];\n    action.forEach(function(a){\n      selectors.push('#dialog [data-dialog-action=' + a + ']');\n    });\n    // grab elements associated with the actions input\n    elements = document.querySelectorAll(selectors.join(', '));\n  } else {\n    // grab elements associated with the action input\n    elements = document.querySelectorAll('#dialog [data-dialog-action=' + action + ']');\n  }\n  // display elements\n  [].forEach.call(elements, function(element){\n    element.style.display = 'block';\n  });\n  // show overlay\n  document.querySelector('body').className = 'overlay-active';\n};\n\nEventPlanner.prototype.showEditDialog = function(){\n  if(this.current_user){\n    this.showDialog(['create-edit-event', 'edit-event']);\n  }\n  else {\n    this.showDialog(['login', 'unauthorized']);\n  }\n};\n\nEventPlanner.prototype.showErrorDialog = function(error){\n  if(error === undefined){\n    error = 'Sorry, something went wrong. Please try your request again.';\n  }\n  document.querySelector('#error').innerHTML = error;\n  this.showDialog(['error']);\n};\n"],"sourceRoot":"/source/"}